var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function o(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t){return null==t?"":t}function l(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode&&t.parentNode.removeChild(t)}function i(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function p(){return d(" ")}function m(){return d("")}function h(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.data!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function b(t,e,n){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}let y;function x(t){y=t}function _(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_mount.push(t)}const w=[],C=[];let j=[];const T=[],k=Promise.resolve();let E=!1;function S(t){j.push(t)}const N=new Set;let A=0;function q(){if(0!==A)return;const t=y;do{try{for(;A<w.length;){const t=w[A];A++,x(t),F(t.$$)}}catch(t){throw w.length=0,A=0,t}for(x(null),w.length=0,A=0;C.length;)C.pop()();for(let t=0;t<j.length;t+=1){const e=j[t];N.has(e)||(N.add(e),e())}j.length=0}while(w.length);for(;T.length;)T.pop()();E=!1,N.clear(),x(t)}function F(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(S)}}const O=new Set;let P;function D(){P={r:0,c:[],p:P}}function I(){P.r||s(P.c),P=P.p}function M(t,e){t&&t.i&&(O.delete(t),t.i(e))}function L(t,e,n,s){if(t&&t.o){if(O.has(t))return;O.add(t),P.c.push((()=>{O.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}else s&&s()}function R(t){t&&t.c()}function J(t,n,c,r){const{fragment:l,after_update:u}=t.$$;l&&l.m(n,c),r||S((()=>{const n=t.$$.on_mount.map(e).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...n):s(n),t.$$.on_mount=[]})),u.forEach(S)}function Q(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];j.forEach((s=>-1===t.indexOf(s)?e.push(s):n.push(s))),n.forEach((t=>t())),j=e}(n.after_update),s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function U(t,e){-1===t.$$.dirty[0]&&(w.push(t),E||(E=!0,k.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(e,o,c,r,l,u,i,f=[-1]){const d=y;x(e);const p=e.$$={fragment:null,ctx:[],props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||d.$$.root};i&&i(p.root);let m=!1;if(p.ctx=c?c(e,o.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),m&&U(e,t)),n})):[],p.update(),m=!0,s(p.before_update),p.fragment=!!r&&r(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();o.intro&&M(e.$$.fragment),J(e,o.target,o.anchor,o.customElement),q()}x(d)}class z{$destroy(){Q(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const t=s.indexOf(n);-1!==t&&s.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function B(t,e,n){const s=t.slice();return s[6]=e[n].sender,s[7]=e[n].message,s}function H(t){let e,n,s,o,c=t[6].charAt(0).toUpperCase()+t[6].slice(1)+": "+t[7];return{c(){e=f("div"),n=d(c),s=p(),g(e,"class",o=r("user"===t[6]?"userMessage":"botMessage")+" svelte-m333gv")},m(t,o){u(t,e,o),l(e,n),l(e,s)},p(t,s){4&s&&c!==(c=t[6].charAt(0).toUpperCase()+t[6].slice(1)+": "+t[7])&&v(n,c),4&s&&o!==(o=r("user"===t[6]?"userMessage":"botMessage")+" svelte-m333gv")&&g(e,"class",o)},d(t){t&&a(e)}}}function K(e){let n,o,c,r,m,v,b,y,x,_,w,C=e[2],j=[];for(let t=0;t<C.length;t+=1)j[t]=H(B(e,C,t));return{c(){n=f("div"),o=f("div");for(let t=0;t<j.length;t+=1)j[t].c();c=p(),r=f("form"),m=f("div"),v=f("textarea"),b=p(),y=f("button"),x=d("Send"),g(o,"id","chatHistory"),g(o,"class","svelte-m333gv"),g(v,"placeholder","Type your message here"),g(v,"class","svelte-m333gv"),g(y,"type","submit"),y.disabled=e[1],g(y,"class","svelte-m333gv"),g(m,"class","inputContainer svelte-m333gv"),g(n,"id","chatContainer"),g(n,"class","svelte-m333gv")},m(t,s){u(t,n,s),l(n,o);for(let t=0;t<j.length;t+=1)j[t]&&j[t].m(o,null);l(n,c),l(n,r),l(r,m),l(m,v),$(v,e[0]),l(m,b),l(m,y),l(y,x),_||(w=[h(v,"input",e[5]),h(v,"keydown",e[4]),h(r,"submit",e[3])],_=!0)},p(t,[e]){if(4&e){let n;for(C=t[2],n=0;n<C.length;n+=1){const s=B(t,C,n);j[n]?j[n].p(s,e):(j[n]=H(s),j[n].c(),j[n].m(o,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=C.length}1&e&&$(v,t[0]),2&e&&(y.disabled=t[1])},i:t,o:t,d(t){t&&a(n),i(j,t),_=!1,s(w)}}}function G(t,e,n){let s="",o=!1,c=[];async function r(t){if(t.preventDefault(),!o){n(1,o=!0);try{n(2,c=[...c,{sender:"user",message:s}]);const t=await fetch("/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:s})});if(!t.ok)throw alert("Es ist ein Fehler aufgetreten"),new Error("Error");n(0,s="");const e=await t.json();n(2,c=[...c,{sender:"bot",message:e}]),console.log(c)}catch(t){console.error("Fetch error:",t)}finally{n(1,o=!1),n(0,s="")}}}return[s,o,c,r,function(t){"Enter"!==t.key||t.shiftKey||(t.preventDefault(),r(t))},function(){s=this.value,n(0,s)}]}class V extends z{constructor(t){super(),Y(this,t,G,K,c,{})}}function W(t,e,n){const s=t.slice();return s[7]=e[n],s}function X(t,e,n){const s=t.slice();return s[10]=e[n],s}function Z(e){let n;return{c(){n=f("p"),n.textContent="Loading data..."},m(t,e){u(t,n,e)},p:t,d(t){t&&a(n)}}}function tt(t){let e,n=t[0],s=[];for(let e=0;e<n.length;e+=1)s[e]=lt(W(t,n,e));return{c(){e=f("div");for(let t=0;t<s.length;t+=1)s[t].c();g(e,"class","grid-container svelte-7j1b9")},m(t,n){u(t,e,n);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null)},p(t,o){if(11&o){let c;for(n=t[0],c=0;c<n.length;c+=1){const r=W(t,n,c);s[c]?s[c].p(r,o):(s[c]=lt(r),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=n.length}},d(t){t&&a(e),i(s,t)}}}function et(t){let e;return{c(){e=f("span"),e.textContent="Not run yet",g(e,"class","status-pending svelte-7j1b9")},m(t,n){u(t,e,n)},d(t){t&&a(e)}}}function nt(t){let e;return{c(){e=f("span"),e.textContent="Failed",g(e,"class","status-fail svelte-7j1b9")},m(t,n){u(t,e,n)},d(t){t&&a(e)}}}function st(t){let e;return{c(){e=f("span"),e.textContent="Passed",g(e,"class","status-pass svelte-7j1b9")},m(t,n){u(t,e,n)},d(t){t&&a(e)}}}function ot(t){let e,n,s,o,c=t[1][t[7]._id]?.actual+"";return{c(){e=f("p"),n=f("strong"),n.textContent="Actual:",s=p(),o=d(c)},m(t,c){u(t,e,c),l(e,n),l(e,s),l(e,o)},p(t,e){3&e&&c!==(c=t[1][t[7]._id]?.actual+"")&&v(o,c)},d(t){t&&a(e)}}}function ct(t){let e,n,s,o=t[7].result,c=[];for(let e=0;e<o.length;e+=1)c[e]=rt(X(t,o,e));return{c(){e=f("div"),n=f("h4"),n.textContent="Previous Results:",s=p();for(let t=0;t<c.length;t+=1)c[t].c();g(e,"class","previous-results svelte-7j1b9")},m(t,o){u(t,e,o),l(e,n),l(e,s);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(e,null)},p(t,n){if(1&n){let s;for(o=t[7].result,s=0;s<o.length;s+=1){const r=X(t,o,s);c[s]?c[s].p(r,n):(c[s]=rt(r),c[s].c(),c[s].m(e,null))}for(;s<c.length;s+=1)c[s].d(1);c.length=o.length}},d(t){t&&a(e),i(c,t)}}}function rt(t){let e,n,s,o,c,r,i,m,h,$,b,y,x,_,w,C,j=t[10].actual+"",T=t[10].success?"Yes":"No",k=new Date(t[10].timestamp).toLocaleString()+"";return{c(){e=f("div"),n=f("p"),s=f("strong"),s.textContent="Actual:",o=p(),c=d(j),r=p(),i=f("p"),m=f("strong"),m.textContent="Success:",h=p(),$=d(T),b=p(),y=f("p"),x=f("strong"),x.textContent="Timestamp:",_=p(),w=d(k),C=p(),g(e,"class","previous-result svelte-7j1b9")},m(t,a){u(t,e,a),l(e,n),l(n,s),l(n,o),l(n,c),l(e,r),l(e,i),l(i,m),l(i,h),l(i,$),l(e,b),l(e,y),l(y,x),l(y,_),l(y,w),l(e,C)},p(t,e){1&e&&j!==(j=t[10].actual+"")&&v(c,j),1&e&&T!==(T=t[10].success?"Yes":"No")&&v($,T),1&e&&k!==(k=new Date(t[10].timestamp).toLocaleString()+"")&&v(w,k)},d(t){t&&a(e)}}}function lt(t){let e,n,s,o,c,r,i,m,$,b,y,x,_,w,C,j,T,k,E,S,N,A,q,F,O,P,D,I,M,L=t[7].name+"",R=t[7].question+"",J=t[7].expected+"",Q=t[7].type+"";function U(t,e){return!0===t[1][t[7]._id]?.success?st:!1===t[1][t[7]._id]?.success?nt:et}let Y=U(t),z=Y(t);function B(){return t[5](t[7])}let H=t[1][t[7]._id]?.actual&&ot(t),K=t[7].result&&ct(t);return{c(){e=f("details"),n=f("summary"),s=f("strong"),o=d(L),c=d("\n          - Status:\n          "),z.c(),r=p(),i=f("button"),i.textContent="Run Test",m=p(),$=f("div"),b=f("p"),y=f("strong"),y.textContent="Question:",x=p(),_=d(R),w=p(),C=f("p"),j=f("strong"),j.textContent="Expected Answer:",T=p(),k=d(J),E=p(),S=f("p"),N=f("strong"),N.textContent="Type:",A=p(),q=d(Q),F=p(),H&&H.c(),O=p(),K&&K.c(),P=p(),g(i,"class","run-button svelte-7j1b9"),g(n,"class","svelte-7j1b9"),g($,"class","details-content svelte-7j1b9"),g(e,"class",D="grid-item "+(!0===t[1][t[7]._id]?.success?"result-true":!1===t[1][t[7]._id]?.success?"result-false":"")+" svelte-7j1b9")},m(t,a){u(t,e,a),l(e,n),l(n,s),l(s,o),l(n,c),z.m(n,null),l(n,r),l(n,i),l(e,m),l(e,$),l($,b),l(b,y),l(b,x),l(b,_),l($,w),l($,C),l(C,j),l(C,T),l(C,k),l($,E),l($,S),l(S,N),l(S,A),l(S,q),l($,F),H&&H.m($,null),l($,O),K&&K.m($,null),l(e,P),I||(M=h(i,"click",B),I=!0)},p(s,c){t=s,1&c&&L!==(L=t[7].name+"")&&v(o,L),Y!==(Y=U(t))&&(z.d(1),z=Y(t),z&&(z.c(),z.m(n,r))),1&c&&R!==(R=t[7].question+"")&&v(_,R),1&c&&J!==(J=t[7].expected+"")&&v(k,J),1&c&&Q!==(Q=t[7].type+"")&&v(q,Q),t[1][t[7]._id]?.actual?H?H.p(t,c):(H=ot(t),H.c(),H.m($,O)):H&&(H.d(1),H=null),t[7].result?K?K.p(t,c):(K=ct(t),K.c(),K.m($,null)):K&&(K.d(1),K=null),3&c&&D!==(D="grid-item "+(!0===t[1][t[7]._id]?.success?"result-true":!1===t[1][t[7]._id]?.success?"result-false":"")+" svelte-7j1b9")&&g(e,"class",D)},d(t){t&&a(e),z.d(),H&&H.d(),K&&K.d(),I=!1,M()}}}function ut(e){let n,s,o,c,r,l,i;function d(t,e){return t[0].length>0?tt:Z}let v=d(e),$=v(e);return{c(){n=f("h1"),n.textContent="Integration Tests",s=p(),o=f("button"),o.textContent="Run all tests",c=p(),$.c(),r=m(),g(o,"class","svelte-7j1b9")},m(t,a){u(t,n,a),u(t,s,a),u(t,o,a),u(t,c,a),$.m(t,a),u(t,r,a),l||(i=h(o,"click",e[2]),l=!0)},p(t,[e]){v===(v=d(t))&&$?$.p(t,e):($.d(1),$=v(t),$&&($.c(),$.m(r.parentNode,r)))},i:t,o:t,d(t){t&&a(n),t&&a(s),t&&a(o),t&&a(c),$.d(t),t&&a(r),l=!1,i()}}}function at(t,e,n){let s=[],o={};async function c(){try{const t=await fetch("/test");t.ok?(n(0,s=await t.json()),console.log(s)):console.error("Failed to fetch data:",t.status)}catch(t){console.error("Error:",t)}}async function r(t){try{const e=await fetch(`/test/run/${t}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const s=await e.json();n(1,o[t]={success:s.success,actual:s.actual},o),console.log(o),console.log("Test success:",s.success),console.log("Test actual:",s.actual)}else console.error("Failed to run test:",e.status)}catch(t){console.error("Error:",t)}}_(c);return[s,o,async function(){for(const t of s)await r(t._id)},r,function(){c()},t=>r(t._id)]}class it extends z{constructor(t){super(),Y(this,t,at,ut,c,{reload:4})}get reload(){return this.$$.ctx[4]}}function ft(t){let e,n,o,c,r,i,d,m,v,y,x,_,w,C,j,T,k,E,N,A,q,F,O,P,D,I,U;return P=new it({props:{}}),t[10](P),{c(){e=f("div"),n=f("h1"),n.textContent="Test Form",o=p(),c=f("form"),r=f("label"),r.textContent="Name:",i=p(),d=f("input"),m=p(),v=f("label"),v.textContent="Question:",y=p(),x=f("input"),_=p(),w=f("label"),w.textContent="Expected Answer:",C=p(),j=f("input"),T=p(),k=f("label"),k.textContent="Type:",E=p(),N=f("select"),A=f("option"),A.textContent="IntegrationTest",q=p(),F=f("input"),O=p(),R(P.$$.fragment),g(r,"for","name"),g(r,"class","svelte-p4wbps"),g(d,"type","text"),g(d,"id","name"),g(d,"name","name"),g(d,"class","svelte-p4wbps"),g(v,"for","question"),g(v,"class","svelte-p4wbps"),g(x,"type","text"),g(x,"id","question"),g(x,"name","question"),g(x,"class","svelte-p4wbps"),g(w,"for","expected"),g(w,"class","svelte-p4wbps"),g(j,"type","text"),g(j,"id","expected"),g(j,"name","expected"),g(j,"class","svelte-p4wbps"),g(k,"for","type"),g(k,"class","svelte-p4wbps"),A.__value="IntegrationTest",A.value=A.__value,g(N,"id","type"),g(N,"name","type"),g(N,"class","svelte-p4wbps"),void 0===t[3]&&S((()=>t[9].call(N))),g(F,"type","submit"),F.value="Submit",g(F,"class","svelte-p4wbps"),g(c,"class","svelte-p4wbps"),g(e,"class","form-container svelte-p4wbps")},m(s,a){u(s,e,a),l(e,n),l(e,o),l(e,c),l(c,r),l(c,i),l(c,d),$(d,t[0]),l(c,m),l(c,v),l(c,y),l(c,x),$(x,t[1]),l(c,_),l(c,w),l(c,C),l(c,j),$(j,t[2]),l(c,T),l(c,k),l(c,E),l(c,N),l(N,A),b(N,t[3],!0),l(c,q),l(c,F),l(e,O),J(P,e,null),D=!0,I||(U=[h(d,"input",t[6]),h(x,"input",t[7]),h(j,"input",t[8]),h(N,"change",t[9]),h(c,"submit",t[5])],I=!0)},p(t,[e]){1&e&&d.value!==t[0]&&$(d,t[0]),2&e&&x.value!==t[1]&&$(x,t[1]),4&e&&j.value!==t[2]&&$(j,t[2]),8&e&&b(N,t[3]);P.$set({})},i(t){D||(M(P.$$.fragment,t),D=!0)},o(t){L(P.$$.fragment,t),D=!1},d(n){n&&a(e),t[10](null),Q(P),I=!1,s(U)}}}function dt(t,e,n){let s,o="",c="",r="",l="IntegrationTest";return[o,c,r,l,s,async function(t){t.preventDefault();const e={name:o,question:c,expected:r,type:l};try{const t=await fetch("/test/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const e=await t.json();console.log("Form submitted successfully:",e),n(0,o=""),n(1,c=""),n(2,r=""),n(3,l="IntegrationTest"),s.reload()}else console.error("Failed to submit form:",t.status)}catch(t){console.error("Error:",t)}},function(){o=this.value,n(0,o)},function(){c=this.value,n(1,c)},function(){r=this.value,n(2,r)},function(){l=function(t){const e=t.querySelector(":checked");return e&&e.__value}(this),n(3,l)},function(t){C[t?"unshift":"push"]((()=>{s=t,n(4,s)}))}]}class pt extends z{constructor(t){super(),Y(this,t,dt,ft,c,{})}}function mt(t){let e,n;return e=new V({}),{c(){R(e.$$.fragment)},m(t,s){J(e,t,s),n=!0},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function ht(t){let e,n;return e=new pt({}),{c(){R(e.$$.fragment)},m(t,s){J(e,t,s),n=!0},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function gt(t){let e,n,o,c,r,i,d,v,$,b,y,x,_,w,C="chat"===t[0]&&mt(),j="history"===t[0]&&ht();return{c(){e=f("nav"),n=f("div"),o=f("h1"),o.textContent="Munot DSP Projekt",c=p(),r=f("div"),i=f("a"),i.textContent="Chat",d=p(),v=f("a"),v.textContent="Tests",$=p(),C&&C.c(),b=p(),j&&j.c(),y=m(),g(o,"class","svelte-3716tx"),g(i,"class","svelte-3716tx"),g(v,"class","svelte-3716tx"),g(r,"class","svelte-3716tx"),g(n,"class","navbar svelte-3716tx"),g(e,"class","svelte-3716tx")},m(s,a){u(s,e,a),l(e,n),l(n,o),l(n,c),l(n,r),l(r,i),l(r,d),l(r,v),u(s,$,a),C&&C.m(s,a),u(s,b,a),j&&j.m(s,a),u(s,y,a),x=!0,_||(w=[h(i,"click",t[2]),h(v,"click",t[3])],_=!0)},p(t,[e]){"chat"===t[0]?C?1&e&&M(C,1):(C=mt(),C.c(),M(C,1),C.m(b.parentNode,b)):C&&(D(),L(C,1,1,(()=>{C=null})),I()),"history"===t[0]?j?1&e&&M(j,1):(j=ht(),j.c(),M(j,1),j.m(y.parentNode,y)):j&&(D(),L(j,1,1,(()=>{j=null})),I())},i(t){x||(M(C),M(j),x=!0)},o(t){L(C),L(j),x=!1},d(t){t&&a(e),t&&a($),C&&C.d(t),t&&a(b),j&&j.d(t),t&&a(y),_=!1,s(w)}}}function vt(t,e,n){let s="chat";function o(t){n(0,s=t)}return[s,o,()=>o("chat"),()=>o("history")]}return new class extends z{constructor(t){super(),Y(this,t,vt,gt,c,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
