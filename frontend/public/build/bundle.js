var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t){return null==t?"":t}function i(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode&&t.parentNode.removeChild(t)}function a(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function p(){return d(" ")}function h(){return d("")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function v(t,e,n){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}let x;function b(t){x=t}function _(t){(function(){if(!x)throw new Error("Function called outside component initialization");return x})().$$.on_mount.push(t)}const C=[],w=[];let k=[];const E=[],T=Promise.resolve();let j=!1;function N(t){k.push(t)}const S=new Set;let q=0;function O(){if(0!==q)return;const t=x;do{try{for(;q<C.length;){const t=C[q];q++,b(t),A(t.$$)}}catch(t){throw C.length=0,q=0,t}for(b(null),C.length=0,q=0;w.length;)w.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];S.has(e)||(S.add(e),e())}k.length=0}while(C.length);for(;E.length;)E.pop()();j=!1,S.clear(),b(t)}function A(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const F=new Set;let I;function M(){I={r:0,c:[],p:I}}function P(){I.r||o(I.c),I=I.p}function D(t,e){t&&t.i&&(F.delete(t),t.i(e))}function L(t,e,n,o){if(t&&t.o){if(F.has(t))return;F.add(t),I.c.push((()=>{F.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function J(t){t&&t.c()}function Q(t,n,s,c){const{fragment:i,after_update:u}=t.$$;i&&i.m(n,s),c||N((()=>{const n=t.$$.on_mount.map(e).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(N)}function R(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];k.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),k=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function U(t,e){-1===t.$$.dirty[0]&&(C.push(t),j||(j=!0,T.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(e,r,s,c,i,u,a,f=[-1]){const d=x;b(e);const p=e.$$={fragment:null,ctx:[],props:u,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:r.target||d.$$.root};a&&a(p.root);let h=!1;if(p.ctx=s?s(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),h&&U(e,t)),n})):[],p.update(),h=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);p.fragment&&p.fragment.l(t),t.forEach(l)}else p.fragment&&p.fragment.c();r.intro&&D(e.$$.fragment),Q(e,r.target,r.anchor,r.customElement),O()}b(d)}class B{$destroy(){R(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function H(t,e,n){const o=t.slice();return o[6]=e[n].sender,o[7]=e[n].message,o}function K(t){let e,n,o,r,s=t[6].charAt(0).toUpperCase()+t[6].slice(1)+": "+t[7];return{c(){e=f("div"),n=d(s),o=p(),g(e,"class",r=c("user"===t[6]?"userMessage":"botMessage")+" svelte-m333gv")},m(t,r){u(t,e,r),i(e,n),i(e,o)},p(t,o){4&o&&s!==(s=t[6].charAt(0).toUpperCase()+t[6].slice(1)+": "+t[7])&&$(n,s),4&o&&r!==(r=c("user"===t[6]?"userMessage":"botMessage")+" svelte-m333gv")&&g(e,"class",r)},d(t){t&&l(e)}}}function G(e){let n,r,s,c,h,$,v,x,b,_,C,w=e[2],k=[];for(let t=0;t<w.length;t+=1)k[t]=K(H(e,w,t));return{c(){n=f("div"),r=f("div");for(let t=0;t<k.length;t+=1)k[t].c();s=p(),c=f("form"),h=f("div"),$=f("textarea"),v=p(),x=f("button"),b=d("Send"),g(r,"id","chatHistory"),g(r,"class","svelte-m333gv"),g($,"placeholder","Type your message here"),g($,"class","svelte-m333gv"),g(x,"type","submit"),x.disabled=e[1],g(x,"class","svelte-m333gv"),g(h,"class","inputContainer svelte-m333gv"),g(n,"id","chatContainer"),g(n,"class","svelte-m333gv")},m(t,o){u(t,n,o),i(n,r);for(let t=0;t<k.length;t+=1)k[t]&&k[t].m(r,null);i(n,s),i(n,c),i(c,h),i(h,$),y($,e[0]),i(h,v),i(h,x),i(x,b),_||(C=[m($,"input",e[5]),m($,"keydown",e[4]),m(c,"submit",e[3])],_=!0)},p(t,[e]){if(4&e){let n;for(w=t[2],n=0;n<w.length;n+=1){const o=H(t,w,n);k[n]?k[n].p(o,e):(k[n]=K(o),k[n].c(),k[n].m(r,null))}for(;n<k.length;n+=1)k[n].d(1);k.length=w.length}1&e&&y($,t[0]),2&e&&(x.disabled=t[1])},i:t,o:t,d(t){t&&l(n),a(k,t),_=!1,o(C)}}}function V(t,e,n){let o="",r=!1,s=[];async function c(t){if(t.preventDefault(),!r){n(1,r=!0);try{n(2,s=[...s,{sender:"user",message:o}]);const t=await fetch("/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:o})});if(!t.ok)throw alert("Es ist ein Fehler aufgetreten"),new Error("Error");n(0,o="");const e=await t.json();n(2,s=[...s,{sender:"bot",message:e}]),console.log(s)}catch(t){console.error("Fetch error:",t)}finally{n(1,r=!1),n(0,o="")}}}return[o,r,s,c,function(t){"Enter"!==t.key||t.shiftKey||(t.preventDefault(),c(t))},function(){o=this.value,n(0,o)}]}class W extends B{constructor(t){super(),z(this,t,V,G,s,{})}}function X(t,e,n){const o=t.slice();return o[7]=e[n],o}function Y(e){let n;return{c(){n=f("p"),n.textContent="Loading data..."},m(t,e){u(t,n,e)},p:t,d(t){t&&l(n)}}}function Z(t){let e,n=t[0],o=[];for(let e=0;e<n.length;e+=1)o[e]=tt(X(t,n,e));return{c(){e=f("div");for(let t=0;t<o.length;t+=1)o[t].c();g(e,"class","grid-container svelte-hpr7ab")},m(t,n){u(t,e,n);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null)},p(t,r){if(11&r){let s;for(n=t[0],s=0;s<n.length;s+=1){const c=X(t,n,s);o[s]?o[s].p(c,r):(o[s]=tt(c),o[s].c(),o[s].m(e,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(t){t&&l(e),a(o,t)}}}function tt(t){let e,n,o,r,s,c,a,h,y,v,x,b,_,C,w,k,E,T,j,N,S,q,O,A,F,I,M,P,D,L,J=t[7].name+"",Q=t[7].question+"",R=t[7].expected+"",U=t[7].type+"";function z(){return t[5](t[7])}return{c(){e=f("div"),n=f("strong"),n.textContent="Name:",o=p(),r=d(J),s=p(),c=f("br"),a=p(),h=f("strong"),h.textContent="Question:",y=p(),v=d(Q),x=p(),b=f("br"),_=p(),C=f("strong"),C.textContent="Expected Answer:",w=p(),k=d(R),E=p(),T=f("br"),j=p(),N=f("strong"),N.textContent="Type:",S=p(),q=d(U),O=p(),A=f("br"),F=p(),I=f("button"),I.textContent="Run",M=p(),g(e,"class",P="grid-item "+(!0===t[1][t[7]._id]?"result-true":!1===t[1][t[7]._id]?"result-false":"")+" svelte-hpr7ab")},m(t,l){u(t,e,l),i(e,n),i(e,o),i(e,r),i(e,s),i(e,c),i(e,a),i(e,h),i(e,y),i(e,v),i(e,x),i(e,b),i(e,_),i(e,C),i(e,w),i(e,k),i(e,E),i(e,T),i(e,j),i(e,N),i(e,S),i(e,q),i(e,O),i(e,A),i(e,F),i(e,I),i(e,M),D||(L=m(I,"click",z),D=!0)},p(n,o){t=n,1&o&&J!==(J=t[7].name+"")&&$(r,J),1&o&&Q!==(Q=t[7].question+"")&&$(v,Q),1&o&&R!==(R=t[7].expected+"")&&$(k,R),1&o&&U!==(U=t[7].type+"")&&$(q,U),3&o&&P!==(P="grid-item "+(!0===t[1][t[7]._id]?"result-true":!1===t[1][t[7]._id]?"result-false":"")+" svelte-hpr7ab")&&g(e,"class",P)},d(t){t&&l(e),D=!1,L()}}}function et(e){let n,o,r,s,c,i,a;function d(t,e){return t[0].length>0?Z:Y}let g=d(e),$=g(e);return{c(){n=f("h1"),n.textContent="Integration Tests",o=p(),r=f("button"),r.textContent="Run all tests",s=p(),$.c(),c=h()},m(t,l){u(t,n,l),u(t,o,l),u(t,r,l),u(t,s,l),$.m(t,l),u(t,c,l),i||(a=m(r,"click",e[2]),i=!0)},p(t,[e]){g===(g=d(t))&&$?$.p(t,e):($.d(1),$=g(t),$&&($.c(),$.m(c.parentNode,c)))},i:t,o:t,d(t){t&&l(n),t&&l(o),t&&l(r),t&&l(s),$.d(t),t&&l(c),i=!1,a()}}}function nt(t,e,n){let o=[],r={};async function s(){try{const t=await fetch("/test");t.ok?(n(0,o=await t.json()),console.log(o)):console.error("Failed to fetch data:",t.status)}catch(t){console.error("Error:",t)}}async function c(t){try{const e=await fetch(`/test/run/${t}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const o=await e.json();n(1,r[t]=o,r),console.log(r),console.log("Test result:",o)}else console.error("Failed to run test:",e.status)}catch(t){console.error("Error:",t)}}_(s);return[o,r,async function(){for(const t of o)await c(t._id)},c,function(){s()},t=>c(t._id)]}class ot extends B{constructor(t){super(),z(this,t,nt,et,s,{reload:4})}get reload(){return this.$$.ctx[4]}}function rt(t){let e,n,r,s,c,a,d,h,$,x,b,_,C,w,k,E,T,j,S,q,O,A,F,I,M,P;return F=new ot({props:{}}),t[10](F),{c(){e=f("h1"),e.textContent="Test Form",n=p(),r=f("form"),s=f("label"),s.textContent="Name:",c=p(),a=f("input"),d=p(),h=f("label"),h.textContent="Question:",$=p(),x=f("input"),b=p(),_=f("label"),_.textContent="Expected Answer:",C=p(),w=f("input"),k=p(),E=f("label"),E.textContent="Type:",T=p(),j=f("select"),S=f("option"),S.textContent="IntegrationTest",q=p(),O=f("input"),A=p(),J(F.$$.fragment),g(s,"for","name"),g(a,"type","text"),g(a,"id","name"),g(a,"name","name"),g(h,"for","question"),g(x,"type","text"),g(x,"id","question"),g(x,"name","question"),g(_,"for","expected"),g(w,"type","text"),g(w,"id","expected"),g(w,"name","expected"),g(E,"for","type"),S.__value="IntegrationTest",S.value=S.__value,g(j,"id","type"),g(j,"name","type"),void 0===t[3]&&N((()=>t[9].call(j))),g(O,"type","submit"),O.value="Submit"},m(o,l){u(o,e,l),u(o,n,l),u(o,r,l),i(r,s),i(r,c),i(r,a),y(a,t[0]),i(r,d),i(r,h),i(r,$),i(r,x),y(x,t[1]),i(r,b),i(r,_),i(r,C),i(r,w),y(w,t[2]),i(r,k),i(r,E),i(r,T),i(r,j),i(j,S),v(j,t[3],!0),i(r,q),i(r,O),u(o,A,l),Q(F,o,l),I=!0,M||(P=[m(a,"input",t[6]),m(x,"input",t[7]),m(w,"input",t[8]),m(j,"change",t[9]),m(r,"submit",t[5])],M=!0)},p(t,[e]){1&e&&a.value!==t[0]&&y(a,t[0]),2&e&&x.value!==t[1]&&y(x,t[1]),4&e&&w.value!==t[2]&&y(w,t[2]),8&e&&v(j,t[3]);F.$set({})},i(t){I||(D(F.$$.fragment,t),I=!0)},o(t){L(F.$$.fragment,t),I=!1},d(s){s&&l(e),s&&l(n),s&&l(r),s&&l(A),t[10](null),R(F,s),M=!1,o(P)}}}function st(t,e,n){let o,r="",s="",c="",i="IntegrationTest";return[r,s,c,i,o,async function(t){t.preventDefault();const e={name:r,question:s,expected:c,type:i};try{const t=await fetch("/test/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const e=await t.json();console.log("Form submitted successfully:",e),n(0,r=""),n(1,s=""),n(2,c=""),n(3,i="IntegrationTest"),o.reload()}else console.error("Failed to submit form:",t.status)}catch(t){console.error("Error:",t)}},function(){r=this.value,n(0,r)},function(){s=this.value,n(1,s)},function(){c=this.value,n(2,c)},function(){i=function(t){const e=t.querySelector(":checked");return e&&e.__value}(this),n(3,i)},function(t){w[t?"unshift":"push"]((()=>{o=t,n(4,o)}))}]}class ct extends B{constructor(t){super(),z(this,t,st,rt,s,{})}}function it(t){let e,n;return e=new W({}),{c(){J(e.$$.fragment)},m(t,o){Q(e,t,o),n=!0},i(t){n||(D(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function ut(t){let e,n;return e=new ct({}),{c(){J(e.$$.fragment)},m(t,o){Q(e,t,o),n=!0},i(t){n||(D(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function lt(t){let e,n,r,s,c,a,d,$,y,v,x,b,_,C,w="chat"===t[0]&&it(),k="history"===t[0]&&ut();return{c(){e=f("nav"),n=f("div"),r=f("h1"),r.textContent="Munot DSP Projekt",s=p(),c=f("div"),a=f("a"),a.textContent="Chat",d=p(),$=f("a"),$.textContent="Tests",y=p(),w&&w.c(),v=p(),k&&k.c(),x=h(),g(r,"class","svelte-3716tx"),g(a,"class","svelte-3716tx"),g($,"class","svelte-3716tx"),g(c,"class","svelte-3716tx"),g(n,"class","navbar svelte-3716tx"),g(e,"class","svelte-3716tx")},m(o,l){u(o,e,l),i(e,n),i(n,r),i(n,s),i(n,c),i(c,a),i(c,d),i(c,$),u(o,y,l),w&&w.m(o,l),u(o,v,l),k&&k.m(o,l),u(o,x,l),b=!0,_||(C=[m(a,"click",t[2]),m($,"click",t[3])],_=!0)},p(t,[e]){"chat"===t[0]?w?1&e&&D(w,1):(w=it(),w.c(),D(w,1),w.m(v.parentNode,v)):w&&(M(),L(w,1,1,(()=>{w=null})),P()),"history"===t[0]?k?1&e&&D(k,1):(k=ut(),k.c(),D(k,1),k.m(x.parentNode,x)):k&&(M(),L(k,1,1,(()=>{k=null})),P())},i(t){b||(D(w),D(k),b=!0)},o(t){L(w),L(k),b=!1},d(t){t&&l(e),t&&l(y),w&&w.d(t),t&&l(v),k&&k.d(t),t&&l(x),_=!1,o(C)}}}function at(t,e,n){let o="chat";function r(t){n(0,o=t)}return[o,r,()=>r("chat"),()=>r("history")]}return new class extends B{constructor(t){super(),z(this,t,at,lt,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
